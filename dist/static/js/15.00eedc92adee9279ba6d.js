webpackJsonp([15],{PsGA:function(n,e,t){var i=t("zqyr");"string"==typeof i&&(i=[[n.i,i,""]]),i.locals&&(n.exports=i.locals);t("rjj0")("1dcfb55d",i,!0)},tVMm:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=t("Xxa5"),a=t.n(i),r=t("exGp"),o=t.n(r),s=t("woOf"),d=t.n(s),l=t("Dd8w"),u=t.n(l),c=t("5aCZ"),f=t("T452"),p=t("NYxO"),h={UT:[]},m=function(){return d()({},h)},v={components:{Tinymce:c.a},name:"add",data:function(){return{dialogImageUrl:"",dialogVisible:!1,id:0,isLimit:!1,inputVisible:!1,inputValue:"",UTfileList:[],form:m()}},mounted:function(){this.handleData()},computed:u()({},Object(p.c)({role:function(n){return n.user.roles}})),methods:{handleData:function(n){var e=this;return o()(a.a.mark(function n(){var t;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f.a.UT.get();case 2:t=n.sent,e.UTfileList=t.data.map(function(n){return u()({},n,{url:n.image_url})});case 4:case"end":return n.stop()}},n,e)}))()},onSubmit:function(n){var e=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.UT.set(e.form.UT[n]);case 2:if(n<e.form.UT.length-1&&e.onSubmit(n+1),n!==e.form.UT.length-1){t.next=6;break}return e.handleData(),t.abrupt("return",e.$message("发布成功"));case 6:case"end":return t.stop()}},t,e)}))()},handleClose:function(n){this.form.join_form.splice(this.form.join_form.indexOf(n),1)},handleUTSuccess:function(n,e){this.UTfileList.push(e);var t=e.name,i=t.indexOf("@");-1===i&&(i=t.indexOf("."));var a=e.name.slice(0,i);this.form.UT.push({image_url:n.data,name:a,sort:1})},handleATSuccess:function(n,e){this.ATfileList.push(e),this.form.AT.push({image_url:n.data,name:e.name})},handleUTRemove:function(n){var e=this.fileList.indexOf(n);this.form.UT.splice(e,1),this.UTfileList.splice(e,1)},handleATRemove:function(n){var e=this.fileList.indexOf(n);this.form.AT.splice(e,1),this.ATfileList.splice(e,1)},showInput:function(){var n=this;this.inputVisible=!0,this.$nextTick(function(e){n.$refs.saveTagInput.$refs.input.focus()})},reset:function(){this.form=m()},handleInputConfirm:function(){var n=this.inputValue;n&&this.form.join_form.push({name:n}),this.inputVisible=!1,this.inputValue=""},handleSwitch:function(n){n||(this.form.join_limit_number=-1)},handleRemove:function(n,e){console.log(n,e)},handlePictureCardPreview:function(n){this.dialogImageUrl=n.url,this.dialogVisible=!0}}},b={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{key:n.id,staticClass:"container"},[t("el-form",{ref:"form",attrs:{model:n.form,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"用户标签"}},[t("el-upload",{attrs:{"list-type":"picture-card",action:"/"+n.role+"/common/upload",name:"files[]",headers:{isAjax:1},"file-list":n.UTfileList,"with-credentials":!0,"on-success":n.handleUTSuccess,"on-preview":n.handlePictureCardPreview,"on-remove":n.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),n._v(" "),t("el-dialog",{attrs:{visible:n.dialogVisible,size:"tiny"},on:{"update:visible":function(e){n.dialogVisible=e}}},[t("img",{attrs:{width:"100%",src:n.dialogImageUrl,alt:""}})])],1),n._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(e){n.onSubmit(0)}}},[n._v("确定")])],1)],1)],1)},staticRenderFns:[]};var g=t("VU/8")(v,b,!1,function(n){t("PsGA")},"data-v-9bd09d82",null);e.default=g.exports},zqyr:function(n,e,t){(n.exports=t("FZ+f")(!1)).push([n.i,"\n.container[data-v-9bd09d82] {\n  width: 80%;\n  min-width: 400px;\n  margin: 0 auto;\n  padding-top: 50px;\n}\n.line[data-v-9bd09d82] {\n  text-align: center;\n}\n.el-tag + .el-tag[data-v-9bd09d82] {\n  margin-left: 10px;\n}\n.button-new-tag[data-v-9bd09d82] {\n  margin-left: 10px;\n  height: 32px;\n  line-height: 30px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.input-new-tag[data-v-9bd09d82] {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n.cover-uploader .el-upload[data-v-9bd09d82] {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.cover-uploader .el-upload[data-v-9bd09d82]:hover {\n  border-color: #409eff;\n}\n.cover-uploader-icon[data-v-9bd09d82] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 316px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.cover-uploader-icon[data-v-9bd09d82]:hover {\n  border-color: #409eff;\n}\n.cover[data-v-9bd09d82] {\n  width: 316px;\n  height: auto;\n  display: block;\n}\n",""])}});