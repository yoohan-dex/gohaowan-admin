webpackJsonp([19],{dSfl:function(e,n,t){(e.exports=t("FZ+f")(!1)).push([e.i,"\n.container[data-v-46b703d6] {\n  width: 80%;\n  min-width: 400px;\n  margin: 0 auto;\n  padding-top: 50px;\n}\n.line[data-v-46b703d6] {\n  text-align: center;\n}\n.el-tag + .el-tag[data-v-46b703d6] {\n  margin-left: 10px;\n}\n.button-new-tag[data-v-46b703d6] {\n  margin-left: 10px;\n  height: 32px;\n  line-height: 30px;\n  padding-top: 0;\n  padding-bottom: 0;\n}\n.input-new-tag[data-v-46b703d6] {\n  width: 90px;\n  margin-left: 10px;\n  vertical-align: bottom;\n}\n.cover-uploader .el-upload[data-v-46b703d6] {\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.cover-uploader .el-upload[data-v-46b703d6]:hover {\n  border-color: #409eff;\n}\n.cover-uploader-icon[data-v-46b703d6] {\n  font-size: 28px;\n  color: #8c939d;\n  width: 316px;\n  height: 178px;\n  line-height: 178px;\n  text-align: center;\n  border: 1px dashed #d9d9d9;\n  border-radius: 6px;\n  cursor: pointer;\n  position: relative;\n  overflow: hidden;\n}\n.cover-uploader-icon[data-v-46b703d6]:hover {\n  border-color: #409eff;\n}\n.cover[data-v-46b703d6] {\n  width: 316px;\n  height: auto;\n  display: block;\n}\n",""])},kE20:function(e,n,t){var i=t("dSfl");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);t("rjj0")("760ef9af",i,!0)},tVMm:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=t("Xxa5"),a=t.n(i),r=t("exGp"),o=t.n(r),s=t("woOf"),l=t.n(s),d=t("Dd8w"),u=t.n(d),c=t("5aCZ"),f=t("T452"),p=t("NYxO"),h={UT:[]},m=function(){return l()({},h)},v={components:{Tinymce:c.a},name:"add",data:function(){return{dialogImageUrl:"",dialogVisible:!1,id:0,isLimit:!1,inputVisible:!1,inputValue:"",UTfileList:[],form:m()}},mounted:function(){this.handleData()},computed:u()({},Object(p.c)({role:function(e){return e.user.roles}})),methods:{handleData:function(e){var n=this;return o()(a.a.mark(function e(){var t;return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.UT.get();case 2:t=e.sent,n.UTfileList=t.data.map(function(e){return u()({},e,{url:e.image_url})});case 4:case"end":return e.stop()}},e,n)}))()},onSubmit:function(e){var n=this;return o()(a.a.mark(function t(){return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,f.a.UT.set(n.form.UT[e]);case 2:if(e<n.form.UT.length-1&&n.onSubmit(e+1),e!==n.form.UT.length-1){t.next=6;break}return n.handleData(),t.abrupt("return",n.$message("发布成功"));case 6:case"end":return t.stop()}},t,n)}))()},handleClose:function(e){this.form.join_form.splice(this.form.join_form.indexOf(e),1)},handleUTSuccess:function(e,n){this.UTfileList.push(n);var t=n.name,i=t.indexOf("@");-1===i&&(i=t.indexOf("."));var a=n.name.slice(0,i);this.form.UT.push({image_url:e.data,name:a,sort:1})},handleATSuccess:function(e,n){this.ATfileList.push(n),this.form.AT.push({image_url:e.data,name:n.name})},handleUTRemove:function(e){var n=this.fileList.indexOf(e);this.form.UT.splice(n,1),this.UTfileList.splice(n,1)},handleATRemove:function(e){var n=this.fileList.indexOf(e);this.form.AT.splice(n,1),this.ATfileList.splice(n,1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick(function(n){e.$refs.saveTagInput.$refs.input.focus()})},reset:function(){this.form=m()},handleInputConfirm:function(){var e=this.inputValue;e&&this.form.join_form.push({name:e}),this.inputVisible=!1,this.inputValue=""},handleSwitch:function(e){e||(this.form.join_limit_number=-1)},handleRemove:function(e,n){console.log(e,n)},handlePictureCardPreview:function(e){this.dialogImageUrl=e.url,this.dialogVisible=!0}}},b={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{key:e.id,staticClass:"container"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"用户标签"}},[t("el-upload",{attrs:{"list-type":"picture-card",action:"http://112.74.25.233:8004/"+e.role+"/common/upload",name:"files[]",headers:{isAjax:1},"file-list":e.UTfileList,"with-credentials":!0,"on-success":e.handleUTSuccess,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove}},[t("i",{staticClass:"el-icon-plus"})]),e._v(" "),t("el-dialog",{attrs:{visible:e.dialogVisible,size:"tiny"},on:{"update:visible":function(n){e.dialogVisible=n}}},[t("img",{attrs:{width:"100%",src:e.dialogImageUrl,alt:""}})])],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(n){e.onSubmit(0)}}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]};var g=t("VU/8")(v,b,!1,function(e){t("kE20")},"data-v-46b703d6",null);n.default=g.exports}});