webpackJsonp([13],{EvGm:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("Xxa5"),r=a.n(n),o=a("exGp"),i=a.n(o),l=a("Dd8w"),s=a.n(l),c=a("NYxO"),u=a("4/BI"),d=a("Ty/O"),p={data:function(){return{tableData:[],total:0,currentPage:1}},mounted:function(){var t=this;return i()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.handleData(1);case 1:case"end":return e.stop()}},e,t)}))()},computed:s()({},Object(c.c)({role:function(t){return t.user.roles}})),methods:{handleData:function(t){var e=this;return i()(r.a.mark(function a(){var n,o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.currentPage=t,a.next=3,d.a.getActivityList(t);case 3:n=a.sent,o=n.data,e.total=o.total,e.tableData=o.list.map(function(t){return e=t,s()({},e,{date:u.a.formatTime(e.start_time)+"  -  "+u.a.formatTime(e.end_time),member:e.joined_number+(-1===e.join_limit_number?"":"/"+e.join_limit_number)});var e});case 7:case"end":return a.stop()}},a,e)}))()},handleBlock:function(t,e){var a=this;return i()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.block({id:t,show:e});case 2:a.handleData(a.currentPage);case 3:case"end":return n.stop()}},n,a)}))()},handleTop:function(t,e){var a=this;return i()(r.a.mark(function n(){return r.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,d.a.setTop(t)(e);case 2:a.handleData(a.currentPage);case 3:case"end":return n.stop()}},n,a)}))()},handleEdit:function(t){this.$router.push({name:"edit-activity",params:{id:t}})},handleMgr:function(t){this.$router.push({name:"action",params:{id:t}})}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total},on:{"current-change":t.handleData}})],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"700",border:""}},[a("el-table-column",{attrs:{label:"活动封面",width:"320"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("div",{staticClass:"cover"},[a("img",{attrs:{src:t.row.cover_image,alt:""}})])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"date",label:"活动时间",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"活动名称",width:"200"}}),t._v(" "),a("el-table-column",{attrs:{prop:"join_fee",label:"活动费用"}}),t._v(" "),a("el-table-column",{attrs:{prop:"member",label:"报名人数"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"300"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleEdit(e.row.id)}}},[t._v("详情")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.handleMgr(e.row.id)}}},[t._v("报名管理")]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"admin"===t.role,expression:"role === 'admin'"}],attrs:{type:"text",size:"small"},on:{click:function(a){t.handleBlock(e.row.id,(e.row.is_show+1)%2)}}},[t._v(t._s(0===e.row.is_show?"取消屏蔽":"屏蔽"))]),t._v(" "),a("el-button",{directives:[{name:"show",rawName:"v-show",value:"admin"===t.role,expression:"role === 'admin'"}],attrs:{type:"text",size:"small"},on:{click:function(a){t.handleTop(e.row.id,(e.row.top+1)%2)}}},[t._v(t._s(0===e.row.top?"置顶":"取消置顶"))])]}}])})],1)],1)},staticRenderFns:[]};var v=a("VU/8")(p,m,!1,function(t){a("lJtF")},"data-v-c06d6658",null);e.default=v.exports},lJtF:function(t,e,a){var n=a("nWaS");"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a("rjj0")("238d1a25",n,!0)},nWaS:function(t,e,a){(t.exports=a("FZ+f")(!1)).push([t.i,"\n.container[data-v-c06d6658] {\n  width: 90%;\n  margin: 20px auto;\n}\n.block[data-v-c06d6658] {\n  width: 100%;\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  margin: 20px 0;\n}\n.cover[data-v-c06d6658] {\n  width: 300px;\n}\n.cover img[data-v-c06d6658] {\n    width: 100%;\n}\n",""])}});